import React, {useState} from 'react';
import s from './Orders.module.scss'
import {OrderItem} from './orderItem/OrderItem'

export const Orders = () => {
    const [orders, setOrders] = useState()
    let orderList = []
    for (let i = 0; i < localStorage.length; i++) {
        let storedValue = localStorage.key(i);
        orderList.push(JSON.parse(localStorage.getItem(storedValue)));
    }
    const deleteOrder = (arg) => {
        localStorage.removeItem(`Заявка от ${arg}`)
        setOrders(orderList)
    }


    return (
        <section className={s.mainWrapper}>
            {!orderList.length
                ?
                <div>Пока нет ни одной записи</div>
                :
                <>
                    <div className={s.tableWrapper}>
                        <div className={s.tableHeader}>
                            <p>Город</p>
                            <p>День</p>
                            <p>Время</p>
                            <p>Телефон</p>
                            <p>Имя</p>
                        </div>
                        <div className={s.tableBody}>
                            {orderList.map(i => <div className={s.tableBodyItem}>
                                <OrderItem propsList={i}/>
                                <button onClick={() => deleteOrder(i.phone)}>Удалить</button>
                            </div>)}
                        </div>

                    </div>
                </>}
        </section>
    )
}